instances:
  - host: <%= @host %>
    port: <%= @port %>
<% if @username -%>
    user: <%= @username %>
    password: <%= @password %>
<% end -%>

<% if @process_name_regex -%>
  #  Instead of specifying a host, and port. The agent can connect using the attach api.
  #  This requires the JDK to be installed and the path to tools.jar to be set below.
    process_name_regex: @process_name_regex
  #   To be set when process_name_regex is set:
  #   tools_jar_path: /usr/lib/jvm/java-7-openjdk-amd64/lib/tools.jar
    tools_jar_path: @tools_jar_path
  #   name: jmx_instance
    name: @jmx_instance
<% end -%>
<% if @java_bin_path -%>
      java_bin_path: @java_bin_path
<% end -%>
<% if @java_options -%>
      java_options: @java_options
<% end -%>
<% if @trust_store_path -%>
      trust_store_path: @trust_store_path
      trust_store_password: @trust_store_password
<% end -%>

<% if @tags and ! @tags.empty? -%>
        tags:
  <%- @tags.each do |key, val| -%>
          <%= "#{key}: #{val}" %>
  <%- end -%>
<% end -%>

# How do we go as deep as we need to go?
<% if @includes and ! @includes.empty? -%>
init_config:
  <%- @includes.each do |key, val| -%>
    <%= "#{key}: #{val}" %>
  <%- end -%>
<% end -%>

# List of metrics to be collected by the integration
# Read http://docs.datadoghq.com/integrations/java/ to learn how to customize it
    # conf:
    #   - include:
    #       domain: my_domain
    #       bean:
    #         - my_bean
    #         - my_second_bean
    #       attribute:
    #         attribute1:
    #           metric_type: counter
    #           alias: jmx.my_metric_name
    #         attribute2:
    #           metric_type: gauge
    #           alias: jmx.my2ndattribute
    #   - include:
    #       domain: 2nd_domain
    #   - exclude:
    #       bean:
    #         - excluded_bean

